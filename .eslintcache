[{"/Users/chifaiwong/Programming/missing_mahjong/src/index.js":"1","/Users/chifaiwong/Programming/missing_mahjong/src/App.js":"2","/Users/chifaiwong/Programming/missing_mahjong/src/reportWebVitals.js":"3","/Users/chifaiwong/Programming/missing_mahjong/src/components/Hello.js":"4","/Users/chifaiwong/Programming/missing_mahjong/src/components/NumButton.js":"5","/Users/chifaiwong/Programming/missing_mahjong/src/components/const.js":"6","/Users/chifaiwong/Programming/missing_mahjong/src/components/MissingMjCal.js":"7"},{"size":500,"mtime":1609778562832,"results":"8","hashOfConfig":"9"},{"size":2817,"mtime":1610383222996,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":1609778562834,"results":"11","hashOfConfig":"9"},{"size":154,"mtime":1610186672409,"results":"12","hashOfConfig":"13"},{"size":279,"mtime":1610295467996,"results":"14","hashOfConfig":"9"},{"size":334,"mtime":1610259158537,"results":"15","hashOfConfig":"9"},{"size":3683,"mtime":1610380728508,"results":"16","hashOfConfig":"9"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},"1wgojco",{"filePath":"20","messages":"21","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22","usedDeprecatedRules":"19"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"pxxdew",{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"19"},"/Users/chifaiwong/Programming/missing_mahjong/src/index.js",[],["36","37"],"/Users/chifaiwong/Programming/missing_mahjong/src/App.js",["38"],"import React from 'react';\nimport './App.css';\nimport NumButton from './components/NumButton';\nimport * as LayoutDef from './components/const';\nimport MissingMjCal from './components/MissingMjCal';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      mjInHand: [],\n      possibleGroup: [],\n    }\n    this.objMissingMjCal = new MissingMjCal();\n    for (let index = 0; index < 16; index++) {\n      this.state.mjInHand.push(this.renderMj(index, false))\n    }\n\n    this.possibleGroup = [];\n  }\n\n  clickToAdd(i) {\n    if (this.objMissingMjCal.changeMjNum(i, true) === true) {\n      this.possibleGroup = this.objMissingMjCal.calMissingMahjong().slice();\n      this.forceUpdate();\n    }\n    \n  }\n\n  clickToDelete(i) {\n    if (this.objMissingMjCal.changeMjNum(i, false) === true) {\n      this.possibleGroup = this.objMissingMjCal.calMissingMahjong().slice();\n      this.forceUpdate();\n    }\n  }\n\n  renderMj(index, bAdd) {\n    if (bAdd === true) {\n      return <NumButton value={index} onClick={() => this.clickToAdd(index)} />;\n    }\n    else {\n      return <NumButton value={index} onClick={() => this.clickToDelete(index)} />;\n    }\n  }\n\n  renderAnswer() {\n    let rdAns = [];\n    let num = this.possibleGroup.length;\n    if(num === 0) {\n      return; \n    }\n\n    this.possibleGroup.forEach(el => {\n      const mj_ans = [];\n      let bRed = false;\n      el.group.forEach(MjNum => {\n        if (MjNum === el.num && bRed === false) {\n          mj_ans.push(<button className=\"button_red\">{MjNum}</button>);\n          bRed = true;\n        }\n        else {\n          mj_ans.push(<button className=\"button\">{MjNum}</button>);\n        }\n      })\n      rdAns.push(<div>{mj_ans}</div>);\n      rdAns.push(<br></br>);\n    });\n\n    <button className=\"button\"></button>\n\n    return rdAns;\n  }\n\n  render() {\n    // create mahjong buttons with 1-9\n    const btn_mj9 = [];\n    const btn_myMj = [];\n    for (let index = 0; index < 9; index++) {\n      btn_mj9.push(this.renderMj(index + 1, true))\n    }\n\n    this.objMissingMjCal.MjInHand.forEach(el => {\n      btn_myMj.push(this.state.mjInHand[el]);\n    });\n\n    const mj_ans = this.renderAnswer();\n\n\n    const rdAns = this.renderAnswer();\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          {/* print header */}\n          {LayoutDef.web_logo}\n          {LayoutDef.intro}\n        </header>\n\n        <body className=\"App-body\">\n          {/* print buttons */}\n          <div>{btn_mj9}</div>\n          <h3>你的手牌</h3>\n          <div>{btn_myMj}</div>\n          <h3>你的聽牌組合</h3>\n          {rdAns}\n        </body>\n\n        <footer className=\"App-footer\">\n          {/* print footer link */}\n          {LayoutDef.intro_link}\n        </footer>\n\n      </div>\n    )\n  }\n}\n\nexport default App;\n","/Users/chifaiwong/Programming/missing_mahjong/src/reportWebVitals.js",[],"/Users/chifaiwong/Programming/missing_mahjong/src/components/Hello.js",[],["39","40"],"/Users/chifaiwong/Programming/missing_mahjong/src/components/NumButton.js",[],"/Users/chifaiwong/Programming/missing_mahjong/src/components/const.js",[],["41","42"],"/Users/chifaiwong/Programming/missing_mahjong/src/components/MissingMjCal.js",["43"],"// to calculate the missing mahjong\nconst MAX_MJ_TYPE = 9;\nconst MAX_MJ_NUM = 4;\nconst MAX_MJ_CHOICE = 16;   // maximum 16 pieces\n\nclass MissingMjCal {\n    constructor() {\n        this.MjInHandNum = Array(MAX_MJ_TYPE).fill(0);  // array to store each mj number (each one max: 4)\n        this.bNeedAPair = false;                        // true: need to include a pair\n        this.MjInHand = [];                             // to store mj in hand in sorted order\n        this.TotalMjNum = 0;\n    }\n\n    // to set NeedAPair is true or not\n    setNeedAPair(bNeedAPair) {\n        this.bNeedAPair = bNeedAPair;\n    }\n\n    // calculate the missing mahjong\n    calMissingMahjong() {\n        // do not need to include a pair\n        let MjGroup = [];\n        if (this.bNeedAPair === false) {\n            // return null as not valid when the number is not right\n            if (this.MjInHand.length % 3 !== 2) return [];\n            for (let i = 1; i < MAX_MJ_TYPE + 1; i++) {\n                let testMjList = this.MjInHand.slice();\n                testMjList.push(i);\n                testMjList.sort();\n                let ans = this.formGroups(testMjList);\n                if (ans !== null) {\n                    let possibleGroup = { num: i, group: ans };\n                    MjGroup.push(possibleGroup);\n                }\n            }\n        }\n        else {\n            // return null as not valid when the number is not right\n            if (this.MjInHand.length % 3 !== 1) return [];\n            for (let i = 1; i < MAX_MJ_TYPE + 1; i++) {\n\n            }\n        }\n        //console.log(MjGroup);\n        return MjGroup;\n    }\n\n    // form groups from a sorted MjList, return list of formed groups\n    // return null if not exist\n    formGroups(MjList) {\n        let MjGroupList = [];\n        while (MjList.length > 0) {\n            // get the first one from the list and find a group\n            let targetMj = MjList.shift();\n            MjGroupList.push(targetMj);\n            //console.log({MjList:MjList});\n\n            // find the next two\n            for (let i = 0; i < 2; i++) {\n                // find next one\n                let nextIndex = MjList.findIndex(el => el === targetMj + 1);\n                targetMj++;\n\n                //console.log({nextIndex: nextIndex});\n                //console.log({targetMj: targetMj});\n\n                // not matched\n                if (nextIndex === -1) return null;\n\n                // found matched, push to group\n                MjGroupList.push(MjList.splice(nextIndex, 1)[0]);\n                //console.log({grouplist: MjGroupList});\n            }\n        }\n        //console.log({Grouplist: MjGroupList});\n        return MjGroupList;\n    }\n\n    // add or minus one from current mj in hand\n    changeMjNum(MjNum, bAdd) {\n        // mj num can only be 1 - 9\n        let MjIndex = MjNum - 1;\n\n        if (MjIndex < 0 || MjIndex >= MAX_MJ_TYPE) return false;\n        if (bAdd === true) {\n            if (this.TotalMjNum === MAX_MJ_CHOICE) return false;\n            if (this.MjInHandNum[MjIndex] === MAX_MJ_NUM) return false;\n            this.MjInHandNum[MjIndex]++;\n\n            // push the mj number and sort\n            this.MjInHand.push(MjNum)\n            this.TotalMjNum++;\n        }\n        else {\n            if (this.MjInHandNum[MjIndex] === 0) return false;\n            this.MjInHandNum[MjIndex]--;\n\n            // delete the matching one\n            const matchIndex = this.MjInHand.findIndex(el => el === MjNum);\n            this.MjInHand.splice(matchIndex, 1);\n            this.TotalMjNum--;\n        }\n\n        // sort the number\n        this.MjInHand.sort();\n        return true;\n    }\n}\n\nexport default MissingMjCal;",{"ruleId":"44","replacedBy":"45"},{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","severity":1,"message":"49","line":87,"column":11,"nodeType":"50","messageId":"51","endLine":87,"endColumn":17},{"ruleId":"44","replacedBy":"52"},{"ruleId":"46","replacedBy":"53"},{"ruleId":"44","replacedBy":"54"},{"ruleId":"46","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":61,"column":50,"nodeType":"58","messageId":"59","endLine":61,"endColumn":75},"no-native-reassign",["60"],"no-negated-in-lhs",["61"],"no-unused-vars","'mj_ans' is assigned a value but never used.","Identifier","unusedVar",["60"],["61"],["60"],["61"],"no-loop-func","Function declared in a loop contains unsafe references to variable(s) 'targetMj'.","ArrowFunctionExpression","unsafeRefs","no-global-assign","no-unsafe-negation"]