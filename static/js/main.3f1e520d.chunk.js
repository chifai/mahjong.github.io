(this.webpackJsonpmissing_mahjong=this.webpackJsonpmissing_mahjong||[]).push([[0],{13:function(n,t,e){},14:function(n,t,e){},15:function(n,t,e){"use strict";e.r(t);var i=e(0),r=e(1),s=e.n(r),u=e(5),o=e.n(u),h=(e(13),e(2)),c=e(3),a=e(7),l=e(6),j=(e(14),e.p+"static/media/logo.6ce24c58.svg"),d=Object(i.jsx)("h3",{children:" \u9078\u64c7\u4f60\u7684\u624b\u724c "}),p=Object(i.jsx)("img",{src:j,className:"App-logo",alt:"logo"}),g=Object(i.jsx)("a",{className:"App-link",href:"https://github.com/chifai/missing_mahjong",target:"_blank",rel:"noopener noreferrer",children:"click here for github repository"}),f=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(h.a)(this,n),this.grouped=t.slice(),this.ungrouped=e.slice(),this.pairNum=i}return Object(c.a)(n,[{key:"isDone",value:function(){return 0===this.ungrouped.length}},{key:"getGrouped",value:function(){return this.grouped.slice()}},{key:"groupPair",value:function(){if(1===this.pairNum)return-1;var n=this.ungrouped[0];return n===this.ungrouped[1]?(this.grouped.push([n,n]),this.ungrouped.splice(0,2),this.pairNum=1,1):0}},{key:"groupThreeAKind",value:function(){var n=this.ungrouped[0];return n===this.ungrouped[1]&&n===this.ungrouped[2]&&(this.grouped.push([n,n,n]),this.ungrouped.splice(0,3),!0)}},{key:"groupContThree",value:function(){var n=this.ungrouped[0];if(0===n)return!1;var t=this.ungrouped.findIndex((function(t){return t===n+1})),e=this.ungrouped.findIndex((function(t){return t===n+2}));return-1!==t&&-1!==e&&(this.ungrouped.shift(),this.ungrouped.splice(t-1,1),this.ungrouped.splice(e-2,1),this.grouped.push([n,n+1,n+2]),!0)}},{key:"copy",value:function(n){n.ungrouped=this.ungrouped.slice(),n.grouped=this.grouped.slice(),n.pairNum=this.pairNum}}]),n}(),M=function(){function n(){Object(h.a)(this,n),this.MjInHandNum=Array(9).fill(0),this.MjInHand=[],this.TotalMjNum=0}return Object(c.a)(n,[{key:"calMissingMahjong",value:function(){return this.MjInHand.length%3===1?[{numToDitch:-1,MjGroup:this.tryMissingMj(this.MjInHand,0).slice()}]:this.MjInHand.length%3===2?this.tryDitchMj(this.MjInHand,0):[]}},{key:"tryDitchMj",value:function(n,t){if(null!==this.formMjGroups(n,t))return[{numToDitch:0,MjGroup:[]}];for(var e=1,i=[],r=0,s=[],u=0,o=0;o<n.length;o++)if(u!==n[o]){var h=n.slice();h.splice(o,1);var c=this.tryMissingMj(h,t);c.length>e?(e=(i=c.slice()).length,r=n[o],(s=[]).push({numToDitch:r,MjGroup:i}),u=r):c.length===e&&(e=(i=c.slice()).length,r=n[o],s.push({numToDitch:r,MjGroup:i}),u=r)}return s}},{key:"tryMissingMj",value:function(n,t){var e=[];for(var i=0;i<10;i++)if(!(i>0&&4===this.MjInHandNum[i-1])){var r=n.slice();r.push(i),r.sort();var s=this.formMjGroups(r,0);if(null!==s){var u={num:i,group:s};e.push(u)}}return e}},{key:"formMjGroups",value:function(n,t){var e=[],i=null;for(e.push(new f([],n,t));e.length>0;){var r=e.pop(),s=void 0;if(!0===r.isDone()){i=r.getGrouped();break}s=new f,r.copy(s),1===s.groupPair()&&e.push(s),s=new f,r.copy(s),!0===s.groupContThree()&&e.push(s),s=new f,r.copy(s),!0===s.groupThreeAKind()&&e.push(s)}return i}},{key:"changeMjNum",value:function(n,t){if(0===n){if(this.bNeedAPair=!t,!0===t){if(0===this.MjInHand[0])return!1;this.MjInHand.push(0),this.MjInHand.push(0),this.TotalMjNum+=2}else 0===this.MjInHand[0]&&(this.MjInHand.splice(0,2),this.TotalMjNum-=2);return this.MjInHand.sort(),!0}var e=n-1;if(e<0||e>=9)return!1;if(!0===t){if(16===this.TotalMjNum)return!1;if(4===this.MjInHandNum[e])return!1;this.MjInHandNum[e]++,this.MjInHand.push(n),this.TotalMjNum++}else{if(0===this.MjInHandNum[e])return!1;this.MjInHandNum[e]--;var i=this.MjInHand.findIndex((function(t){return t===n}));this.MjInHand.splice(i,1),this.TotalMjNum--}return this.MjInHand.sort(),!0}}]),n}(),b=function(n){Object(a.a)(e,n);var t=Object(l.a)(e);function e(n){var i;return Object(h.a)(this,e),(i=t.call(this,n)).objMissingMjCal=new M,i.ans=[],i}return Object(c.a)(e,[{key:"clickToAdd",value:function(n){if(!0===this.objMissingMjCal.changeMjNum(n,!0)){var t=this.objMissingMjCal.calMissingMahjong();this.ans=t.slice(),this.forceUpdate()}}},{key:"clickToDelete",value:function(n){if(!0===this.objMissingMjCal.changeMjNum(n,!1)){var t=this.objMissingMjCal.calMissingMahjong();this.ans=t.slice(),this.forceUpdate()}}},{key:"renderMjButton",value:function(n,t){var e=this;return!0===t?0===n?Object(i.jsx)("button",{className:"button",onClick:function(){return e.clickToAdd(n)},children:"\u767c"}):Object(i.jsx)("button",{className:"button",onClick:function(){return e.clickToAdd(n)},children:n}):0===n?Object(i.jsx)("button",{className:"button",onClick:function(){return e.clickToDelete(n)},children:"\u767c"}):Object(i.jsx)("button",{className:"button",onClick:function(){return e.clickToDelete(n)},children:n})}},{key:"renderEachGroup",value:function(n,t){return n.forEach((function(n){var e=[],r=!1;n.group.forEach((function(t){t.forEach((function(t){t===n.num&&!1===r?(0===t?e.push(Object(i.jsx)("button",{className:"button_red",children:"\u767c"})):e.push(Object(i.jsx)("button",{className:"button_red",children:t})),r=!0):0===t?e.push(Object(i.jsx)("button",{className:"button",children:"\u767c"})):e.push(Object(i.jsx)("button",{className:"button",children:t}))}))})),t.push(Object(i.jsx)("div",{children:e})),t.push(Object(i.jsx)("br",{}))})),t}},{key:"renderAnswer",value:function(){var n=this,t=[];return this.ans.forEach((function(e){0===e.numToDitch?t.push(Object(i.jsx)("h3",{children:"\u5df2\u7cca\u724c"})):-1===e.numToDitch?0===e.MjGroup.length?t.push(Object(i.jsx)("h3",{children:"\u7121\u6cd5\u807d\u724c"})):(t.push(Object(i.jsx)("h3",{children:"\u4f60\u7684\u807d\u724c\u7d44\u5408"})),n.renderEachGroup(e.MjGroup,t)):(t.push(Object(i.jsxs)("h3",{children:["\u6253\u6389",e.numToDitch,"\u865f\u724c\uff0c\u807d\u4ee5\u4e0b\u7d44\u5408"]})),n.renderEachGroup(e.MjGroup,t))})),t}},{key:"render",value:function(){var n=this,t=[],e=[],r=this.renderAnswer();t.push(this.renderMjButton(0,!0));for(var s=0;s<9;s++)t.push(this.renderMjButton(s+1,!0));return this.objMissingMjCal.MjInHand.forEach((function(t){e.push(n.renderMjButton(t,!1))})),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("header",{className:"App-header",children:[p,d]}),Object(i.jsxs)("body",{className:"App-body",children:[Object(i.jsx)("div",{children:t}),Object(i.jsx)("h3",{children:"\u4f60\u7684\u624b\u724c"}),Object(i.jsx)("div",{children:e}),r]}),Object(i.jsx)("footer",{className:"App-footer",children:g})]})}}]),e}(s.a.Component),m=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,16)).then((function(t){var e=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,u=t.getTTFB;e(n),i(n),r(n),s(n),u(n)}))};o.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(b,{})}),document.getElementById("root")),m()}},[[15,1,2]]]);
//# sourceMappingURL=main.3f1e520d.chunk.js.map